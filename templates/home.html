{% extends "base.html" %}
{% load static %}
{% block title %}InÃ­cio{% endblock %}

{% block content %}
<h1>Bem-vindo(a) ðŸ‘‹</h1>

<div class="grid2">
  <section class="card">
    <h2 style="margin-top:0;">AÃ§Ãµes rÃ¡pidas</h2>
    <div class="row gap8" style="flex-wrap:wrap;">
      <a class="btn primary" href="{% url 'pedidos:criar' %}">+ Novo Pedido</a>
      <a class="btn" href="{% url 'pedidos:cozinha' %}">Abrir Cozinha</a>
      <a class="btn ghost" href="/admin/pedidos/produto/">Gerenciar Produtos</a>
      <a class="btn ghost" href="/admin/pedidos/pedido/">Pedidos (Admin)</a>
    </div>
  </section>

  <section class="card">
    <h2 style="margin-top:0;">Resumo de hoje</h2>
    <ul style="list-style:none; padding:0; margin:0; display:grid; gap:8px;">
      <li class="row" style="justify-content:space-between;">
        <span>Pedidos criados</span>
        <strong>{{ resumo.hoje_pedidos }}</strong>
      </li>
      <li class="row" style="justify-content:space-between;">
        <span>Pedidos concluÃ­dos</span>
        <strong>{{ resumo.hoje_concluidos }}</strong>
      </li>
      <li class="row" style="justify-content:space-between;">
        <span>Faturamento estimado</span>
        <strong>R$ {{ resumo.hoje_total|default:"0.00"|floatformat:2 }}</strong>
      </li>
    </ul>
  </section>
</div>

{% include "partials/estoque_widget.html" %}

<section class="card" style="margin-top:16px;">
  <h2 style="margin-top:0;">Ãšltimos pedidos</h2>
  <table style="width:100%; border-collapse:collapse;">
    <thead>
      <tr>
        <th style="text-align:left; padding:8px;">NÂº</th>
        <th style="text-align:left; padding:8px;">Cliente</th>
        <th style="text-align:left; padding:8px;">Status</th>
        <th style="text-align:right; padding:8px;">Total</th>
        <th style="text-align:right; padding:8px;">Criado</th>
        <th style="text-align:right; padding:8px;"></th>
      </tr>
    </thead>
    <tbody>
      {% for p in ultimos %}
      <tr style="border-top:1px solid var(--border);">
        <td style="padding:8px;">{{ p.numero }}</td>
        <td style="padding:8px;">{{ p.nome_cliente }}</td>
        <td style="padding:8px;">{{ p.get_status_display }}</td>
        <td style="padding:8px; text-align:right;">R$ {{ p.total|floatformat:2 }}</td>
        <td style="padding:8px; text-align:right;">{{ p.criado_em|date:"d/m H:i" }}</td>
        <td style="padding:8px; text-align:right;">
          <a class="btn ghost" href="{% url 'pedidos:detalhe' p.pk %}">ver</a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="6" style="padding:12px; color:var(--muted);">Sem pedidos ainda.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
